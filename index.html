<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ูุธุงู ุงูุญุณุงุจุงุช</title>

  <!-- iOS PWA hints -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#0A84FF" />

  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />

  <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="charts.js"></script>
  <script defer src="app.js"></script>
</head>

<body>

</div>
><div class="stars"></div>>
  <!-- Splash -->
  <div id="splash" class="splash" aria-hidden="true">
    <div class="splash-card">
      <div class="splash-icon">๐</div>
      <div class="splash-title">ูุธุงู ุงูุญุณุงุจุงุช</div>
      <div class="splash-sub">iOSโgrade โข ุณุฑูุน โข ุจุณูุท</div>
      <div class="splash-loader"></div>
    </div>
  </div>

  <!-- Intro (first run) -->
  <div id="intro" class="intro hidden" aria-label="ุชุฑุญูุจ">
    <div class="intro-sheet">
      <div class="intro-slide active">
        <div class="intro-emoji">๐</div>
        <h1>ูุฑุญุจุงู</h1>
        <p>ุชุทุจูู ุญุณุงุจุงุช ุจุชุฌุฑุจุฉ ูุงุฏุฆุฉ ูุซู iOS.</p>
      </div>
      <div class="intro-slide">
        <div class="intro-emoji">๐งพ</div>
        <h1>ุฑุชูุจ ุดุบูู</h1>
        <p>ุนููุงุกุ ููุงุชูุฑุ ูุตุฑููุงุชโฆ ุจูู ุณูุงุณุฉ.</p>
      </div>
      <div class="intro-slide">
        <div class="intro-emoji">๐</div>
        <h1>ุดูู ุงูุฃุฑุจุงุญ</h1>
        <p>ููุฎุต + ุฃุฑุจุงุญ ุดูุฑูุฉ/ุณูููุฉ ุจุฑุณูู.</p>
      </div>

      <div class="intro-actions">
        <button id="introSkip" class="btn ghost">ุชุฎุทู</button>
        <button id="introNext" class="btn primary">ุงูุชุงูู</button>
      </div>
    </div>
  </div>

  <!-- Login -->
  <div id="loginGate" class="login-gate" aria-label="ุชุณุฌูู ุงูุฏุฎูู">
    <div class="card login-card">
      <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
      <p class="muted">ููุงุณุชุฎุฏุงู ุงููุญูู. (admin / admin)</p>
      <label class="field">
        <span>ุงุณู ุงููุณุชุฎุฏู</span>
        <input id="lg_user" autocomplete="username" placeholder="admin" />
      </label>
      <label class="field">
        <span>ูููุฉ ุงููุฑูุฑ</span>
        <input id="lg_pass" type="password" autocomplete="current-password" placeholder="admin" />
      </label>
      <button id="loginBtn" class="btn primary">ุฏุฎูู</button>
      <div id="lg_error" class="error hidden">ุจูุงูุงุช ุงูุฏุฎูู ุบูุฑ ุตุญูุญุฉ</div>
    </div>
  </div>

  <!-- Top bar -->
  <header id="topbar" class="topbar hidden">
    <div class="brand">
      <img src="icon-192.png" class="brand-icon" alt="" />
      <div class="brand-text">
        <div class="brand-title">ูุธุงู ุงูุญุณุงุจุงุช</div>
        <div class="brand-sub">ุฅุฏุงุฑุฉ ูุงููุฉ ุฐููุฉ</div>
      </div>
    </div>

    <div class="top-actions">
      <button id="themeToggle" class="icon-btn" title="ุงููุถุน ุงููููู" aria-label="ุงููุถุน ุงููููู">
        <span id="themeIcon">๐</span>
      </button>
      <button id="logoutBtn" class="icon-btn danger" title="ุฎุฑูุฌ" aria-label="ุฎุฑูุฌ">โ</button>
    </div>
  </header>

  <main id="app" class="hidden">
    <!-- Clients -->
    <section id="clients" class="page active">
      <div class="card">
        <h3>โ ุฅุถุงูุฉ ุนููู</h3>
        <div class="row">
          <label class="field">
            <span>ุงูุงุณู</span>
            <input id="c_name" placeholder="ุงุณู ุงูุนููู" />
          </label>
          <label class="field">
            <span>ุงููุงุชู</span>
            <input id="c_phone" placeholder="07xxxxxxxxx" />
          </label>
          <label class="field">
            <span>ุงููุฏููุฉ</span>
            <input id="c_city" placeholder="ุจุบุฏุงุฏ" />
          </label>
        </div>
        <div class="row actions">
          <button id="addClientBtn" class="btn primary">ุฅุถุงูุฉ</button>
          <button id="clearAllBtn" class="btn ghost">ูุณุญ ูู ุงูุจูุงูุงุช</button>
        </div>
        <p class="note">ุงูุจูุงูุงุช ุชูุญูุธ ูุญูููุง ุนูู ูุฐุง ุงูุฌูุงุฒ.</p>
      </div>

      <div class="card">
        <h3>๐ ุงูุนููุงุก</h3>
        <div class="card-list" id="clientCards"></div>
        <div class="table-wrap desktop-only">
          <table>
            <thead>
              <tr>
                <th>ุงูุงุณู</th>
                <th>ุงููุงุชู</th>
                <th>ุงููุฏููุฉ</th>
                <th>ุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="clientRows"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Invoices -->
    <section id="invoices" class="page">
      <div class="card">
        <h3>๐งพ ุฅุถุงูุฉ ูุงุชูุฑุฉ</h3>
        <div class="row">
          <label class="field">
            <span>ุงูุนููู</span>
            <select id="i_client"></select>
          </label>
          <label class="field">
            <span>ุงููุตู</span>
            <input id="i_desc" placeholder="ูุซุงู: ุชุตููู ูุงุฌูุฉ" />
          </label>
          <label class="field">
            <span>ุงููุจูุบ</span>
            <input id="i_amount" type="number" inputmode="decimal" placeholder="0" />
          </label>
          <label class="field">
            <span>ุงูุชุงุฑูุฎ</span>
            <input id="i_date" type="date" />
          </label>
        </div>
        <div class="row actions">
          <button id="addInvoiceBtn" class="btn primary">ุฅุถุงูุฉ</button>
          <button id="invTodayBtn" class="btn ghost">ุงูููู</button>
        </div>

        <hr class="sep" />

        <h3>๐ ุจุญุซ / ููุชุฑุฉ</h3>
        <div class="row">
          <label class="field">
            <span>ุจุญุซ ุจุงููุตู</span>
            <input id="invSearch" placeholder="ูููุฉ..." />
          </label>
          <label class="field">
            <span>ุนููู</span>
            <select id="f_client"></select>
          </label>
          <label class="field">
            <span>ูู</span>
            <input id="f_from" type="date" />
          </label>
          <label class="field">
            <span>ุฅูู</span>
            <input id="f_to" type="date" />
          </label>
        </div>
        <div class="row actions">
          <button id="applyFilterBtn" class="btn ghost">ุชุทุจูู</button>
          <button id="clearFilterBtn" class="btn ghost">ูุณุญ</button>
        </div>
      </div>

      <div class="card">
        <h3>๐ ุงูููุงุชูุฑ</h3>
        <div class="card-list" id="invoiceCards"></div>
        <div class="table-wrap desktop-only">
          <table>
            <thead>
              <tr>
                <th>ุงูุนููู</th>
                <th>ุงููุตู</th>
                <th>ุงููุจูุบ</th>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="invoiceRows"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Expenses -->
    <section id="expenses" class="page">
      <div class="card">
        <h3>๐ธ ุฅุถุงูุฉ ูุตุฑูู</h3>
        <div class="row">
          <label class="field">
            <span>ุงููุตู</span>
            <input id="e_desc" placeholder="ูุซุงู: ุงูุชุฑูุช" />
          </label>
          <label class="field">
            <span>ุงููุจูุบ</span>
            <input id="e_amount" type="number" inputmode="decimal" placeholder="0" />
          </label>
          <label class="field">
            <span>ุงูุชุงุฑูุฎ</span>
            <input id="e_date" type="date" />
          </label>
        </div>
        <div class="row actions">
          <button id="addExpenseBtn" class="btn primary">ุฅุถุงูุฉ</button>
          <button id="expTodayBtn" class="btn ghost">ุงูููู</button>
        </div>

        <hr class="sep" />

        <h3>๐ ุจุญุซ</h3>
        <div class="row">
          <label class="field">
            <span>ุจุญุซ ุจุงููุตู</span>
            <input id="expSearch" placeholder="ูููุฉ..." />
          </label>
        </div>
      </div>

      <div class="card">
        <h3>๐งพ ุงููุตุฑููุงุช</h3>
        <div class="card-list" id="expenseCards"></div>
        <div class="table-wrap desktop-only">
          <table>
            <thead>
              <tr>
                <th>ุงููุตู</th>
                <th>ุงููุจูุบ</th>
                <th>ุงูุชุงุฑูุฎ</th>
                <th>ุฅุฌุฑุงุกุงุช</th>
              </tr>
            </thead>
            <tbody id="expenseRows"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Summary -->
    <section id="summary" class="page">
      <div class="grid cols3">
        <div class="card kpi">
          <div class="kpi-label">ุฅุฌูุงูู ุงูููุงุชูุฑ</div>
          <div class="kpi-value" id="s_in">0</div>
          <div class="kpi-sub">ุงูุฏุฎู</div>
        </div>
        <div class="card kpi">
          <div class="kpi-label">ุฅุฌูุงูู ุงููุตุฑููุงุช</div>
          <div class="kpi-value" id="s_ex">0</div>
          <div class="kpi-sub">ุงูุฎุฑูุฌ</div>
        </div>
        <div class="card kpi">
          <div class="kpi-label">ุงูุตุงูู</div>
          <div class="kpi-value" id="s_net">0</div>
          <div class="kpi-sub">ุฑุจุญ / ุฎุณุงุฑุฉ</div>
        </div>
      </div>

      <div class="card">
        <h3>๐ค ุชุตุฏูุฑ / ูุณุฎ ุงุญุชูุงุทู</h3>
        <div class="row actions">
          <button id="exportAllBtn" class="btn ghost">ุชุตุฏูุฑ CSV (Excel)</button>
          <button id="printSummaryBtn" class="btn ghost">ุชุตุฏูุฑ PDF (ุชูุฑูุฑ)</button>
          <button id="backupBtn" class="btn ghost">Backup JSON</button>
          <label class="btn ghost file-btn">
            Restore JSON
            <input id="restoreFile" type="file" accept="application/json" />
          </label>
          <button id="restoreBtn" class="btn ghost">ุงุณุชุฑุฌุงุน</button>
        </div>
        <p class="note">PDF ุนุจุฑ ุงููุชุตูุญ: ูุดุงุฑูุฉ/ุทุจุงุนุฉ โ ุญูุธ PDF.</p>
      </div>

      <div class="grid cols2">
        <div class="card">
          <h3>๐ ุฃุฑุจุงุญ ุดูุฑูุฉ</h3>
          <canvas id="monthlyChart" height="140"></canvas>
        </div>
        <div class="card">
          <h3>๐ ุฃุฑุจุงุญ ุณูููุฉ</h3>
          <canvas id="yearlyChart" height="140"></canvas>
        </div>
      </div>
    </section>

    <!-- Settings -->
    <section id="settings" class="page">
      <div class="card">
        <h3>โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h3>

        <div class="row">
          <label class="field">
            <span>ููู ุงูุชูููุฒ</span>
            <input type="color" id="accentPicker" value="#0A84FF" />
          </label>
          <div class="field">
            <span>ุงูุซูู</span>
            <div class="preset-row">
              <button class="btn ghost preset" data-theme="midnight">Midnight</button>
              <button class="btn ghost preset" data-theme="graphite">Graphite</button>
              <button class="btn ghost preset" data-theme="snow">Snow</button>
            </div>
          </div>

          <div class="field">
            <span>ุชูุงุฑูุฑ</span>
            <button id="printFullBtn" class="btn ghost">ุชูุฑูุฑ ูุงูู PDF</button>
          </div>
        </div>

        <hr class="sep" />

        <div class="info-card mini">
          <h4>ููุงุญุธุฉ ุตุงุฏูุฉ</h4>
          <ul class="check-list">
            <li>ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููููู</li>
            <li>ุฌุงูุฒ ููุชุทููุฑ ูุงูุชูุณุนุฉ</li>
            <li>ูุงุนุฏุฉ ูููุฉ ูููุธููุฉ</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <!-- Bottom Tab Bar (iOS style) -->
  <nav id="tabbar" class="tabbar hidden" aria-label="ุงูุชููู ุงูุณููู">
    <button class="tab-item active" data-tab="clients">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 11c1.66 0 3-1.57 3-3.5S17.66 4 16 4s-3 1.57-3 3.5S14.34 11 16 11Zm-8 0c1.66 0 3-1.57 3-3.5S9.66 4 8 4 5 5.57 5 7.5 6.34 11 8 11Zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5C15 14.17 10.33 13 8 13Zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h7v-2.5C24 14.17 19.33 13 16 13Z"/></svg>
      <small>ุงูุนููุงุก</small>
    </button>
    <button class="tab-item" data-tab="invoices">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 2h9l5 5v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Zm8 1v5h5M7 10h10v2H7v-2Zm0 4h10v2H7v-2Zm0 4h7v2H7v-2Z"/></svg>
      <small>ุงูููุงุชูุฑ</small>
    </button>
    <button class="tab-item" data-tab="expenses">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4Zm1 17h-2v-2h2v2Zm0-4h-2V7h2v7Z"/></svg>
      <small>ุงููุตุฑููุงุช</small>
    </button>
    <button class="tab-item" data-tab="summary">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 3h2v18H3V3Zm16 6h2v12h-2V9ZM7 13h2v8H7v-8Zm4-10h2v18h-2V3Zm4 6h2v12h-2V9Z"/></svg>
      <small>ุงูููุฎุต</small>
    </button>
    <button class="tab-item" data-tab="settings">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19.14,12.94a7.49,7.49,0,0,0,.05-.94,7.49,7.49,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.23,7.23,0,0,0-1.63-.94l-.38-2.65A.5.5,0,0,0,11.8,0H8.2a.5.5,0,0,0-.49.42L7.33,3.07a7.23,7.23,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.64L2.86,11.06a7.49,7.49,0,0,0-.05.94,7.49,7.49,0,0,0,.05.94L.75,14.59a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.23,7.23,0,0,0,1.63.94l.38,2.65a.5.5,0,0,0,.49.42h3.6a.5.5,0,0,0,.49-.42l.38-2.65a7.23,7.23,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.64ZM10,15.5A3.5,3.5,0,1,1,13.5,12,3.5,3.5,0,0,1,10,15.5Z"/></svg>
      <small>ุงูุฅุนุฏุงุฏุงุช</small>
    </button>
  </nav>

  <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
